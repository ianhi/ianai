[['anthropic/claude-sonnet-4.5', 'qwen/qwen3-coder-plus', 'qwen/qwen3-coder', 'qwen/qwen3-coder-flash', 'anthropic/claude-haiku-4.5'], [], ['dict[str, str]] = [\n            {\n                "role": "system', 'content": "', 'You are a helpful AI assistant that can read and write files.\n\n                When working with files, be efficient and selective:\n                - Use list_files to explore directory structure before reading specific files\n                - Only read files that are directly relevant to the user\'s request\n                - Avoid reading multiple files when one or two will suffice to answer the question\n                - When listing files, use patterns to filter results and avoid overwhelming output\n                - Focus on quality over quantity - reading fewer, more relevant files is better than reading everything\n                - Ask yourself: "Do I really need to read this file to answer the user\'s question?"\n                "', ',\n            }\n        ]\n\n    def switch_model(self):\n        "', 'Allow user to switch between available models"', '\n        try:\n            new_model = self.ui.show_model_selector(self.AVAILABLE_MODELS, self.model)\n            if new_model and new_model != self.model:\n                self.model = new_model\n                # Reset chat history when switching models\n                self.chat_history = [\n                    {\n                        "role": "system', 'content": "', 'You are a helpful AI assistant that can read and write files.\n\n                        When working with files, be efficient and selective:\n                        - Use list_files to explore directory structure before reading specific files\n                        - Only read files that are directly relevant to the user\'s request\n                        - Avoid reading multiple files when one or two will suffice to answer the question\n                        - When listing files, use patterns to filter results and avoid overwhelming output\n                        - Focus on quality over quantity - reading fewer, more relevant files is better than reading everything\n                        - Ask yourself: "Do I really need to read this file to answer the user\'s question?"\n                        "', ',\n                    }\n                ]\n                self.ui.show_info(f"✓ Switched to model: {self.model}")\n        except KeyboardInterrupt:\n            # User cancelled model selection\n            self.ui.show_info("Model selection cancelled")\n\n    def format_modified_files(self):\n        "', 'Run ruff format on all modified Python files"', '\n        # Filter to only Python files\n        python_files = [f for f in self.modified_files if f.endswith(\'.py\')]\n        if not python_files:\n            return\n\n        try:\n            for file_path in python_files:\n                # Run ruff format on the file\n                result = subprocess.run(\n                    [\'ruff\', \'format\', file_path],\n                    capture_output=True,\n                    text=True\n                )\n                if result.returncode == 0:\n                    self.ui.show_info(f"✓ Formatted {file_path} with ruff")\n                else:\n                    self.ui.show_warning(f"⚠️  Failed to format {file_path}: {result.stderr}")\n        except FileNotFoundError:\n            self.ui.show_warning("⚠️  ruff not found. Please install it with: pip install ruff")\n        except Exception as e:\n            self.ui.show_error(f"Error running ruff format: {str(e)}")\n        \n        # Clear the modified files set after formatting\n        self.modified_files.clear()\n\n    def run_loop(self):\n        "', '\n        Run the interactive loop where user can type inputs and get AI responses.\n        Files referenced with @ will be inserted into the prompt before sending to AI.\n        "', '\n        self.ui.show_welcome()\n        self.ui.show_model_info(self.model)\n\n        while True:\n            try:\n                self.ui.show_separator()\n\n                user_input = self.ui.get_user_input()\n\n                # Handle model switching command\n                if user_input.strip().lower() == "/model":\n                    self.switch_model()\n                    self.ui.show_model_info(self.model)\n                    continue\n\n                if len(user_input) < 4:\n                    self.ui.show_info(', 'Input too short, please try again")\n                    continue\n\n                if user_input.lower() in ["quit', 'exit', 'q'], {'role': 'user', 'content': 'processed_input'}, [-1], ['role'], {'role': 'assistant', 'content': 'response'}, {'unknown': ''}, ['diff'], ['diff'], ['diff'], ['diff'], [0], [], {'tool_call_id': 'tool_call.id', 'role': 'tool', 'name': 'tool_call.function.name', 'content': 'result'}]